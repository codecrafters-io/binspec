name: Kafka Produce Request (v11)
slug: kafka-produce-request-v11

# Produce Request (Version: 11) => transactional_id acks timeout_ms [topic_data] _tagged_fields
#   transactional_id => COMPACT_NULLABLE_STRING
#   acks => INT16
#   timeout_ms => INT32
#   topic_data => name [partition_data] _tagged_fields
#     name => COMPACT_STRING
#     partition_data => index records _tagged_fields
#       index => INT32
#       records => COMPACT_RECORDS
data:
  - 0x00 # Message length (4 bytes, 0x00000138 in hex, 312 in decimal)
  - 0x00
  - 0x01
  - 0x38
  - 0x00 # API key (2 bytes, 0x0000 in hex, 0 in decimal => Produce)
  - 0x00
  - 0x00 # API version (2 bytes, 0x000b in hex, 11 in decimal)
  - 0x0b
  - 0x00 # Correlation ID (4 bytes, 0x06 in hex, 6 in decimal)
  - 0x00
  - 0x00
  - 0x06
  - 0x00 # Client ID length (INT16, 2 bytes, 0x000a in hex, 10 in decimal)
  - 0x0a
  - 0x70 # p: Client ID ("producer-1" in UTF-8)
  - 0x72
  - 0x6f
  - 0x64
  - 0x75
  - 0x63
  - 0x65
  - 0x72
  - 0x2d
  - 0x31
  - 0x00 # Empty tagged field array (1 byte, 0x00 in hex, 0 in decimal)
  - 0x00 # Transaction ID (COMPACT_NULLABLE_STRING, 0x00 in hex, 0 in decimal -> NULL)
  - 0xff # Required ACKS (2 bytes, 0xffff in hex, -1 in decimal)
  - 0xff
  - 0x00 # Timeout (4 bytes, 0x007530 in hex, 30000 in decimal)
  - 0x00
  - 0x75
  - 0x30
  - 0x03 # Topics array length + 1 (unsigned varint, 1 byte, 0x03 in hex, 3 in decimal)
  - 0x04 # Topic name length (unsigned varint, 1 byte, 0x04 in hex, 4 in decimal)
  - 0x70 # p (Topic name ("pax" in UTF-8))
  - 0x61 # a
  - 0x78 # x
  - 0x02 # Partitions Array Length + 1 (unsigned varint, 0x02 in hex, 2 in decimal)
  - 0x00 # Partitions[0].ID (4 bytes, 0x00000000 in hex, 0 in decimal)
  - 0x00
  - 0x00
  - 0x00
  - 0x55 # All RecordBatch length + 1 (unsigned varint, 0x55 in hex, 85 in decimal)
  - 0x00 # RecordBatch[0]: Offset (8 bytes, 0x0000000000000000 in hex, 0 in decimal)
  - 0x00
  - 0x00
  - 0x00
  - 0x00
  - 0x00
  - 0x00
  - 0x00
  - 0x00 # RecordBatch Size: Including the size itself (4 bytes, 0x00000048 in hex, 72 in decimal)
  - 0x00
  - 0x00
  - 0x48
  - 0xff # RecordBatch PartitionLeaderEpoch (4 bytes, 0xffffffff in hex, -1 in decimal)
  - 0xff
  - 0xff
  - 0xff
  - 0x02 # RecordBatch MagicByte (1 byte, 0x02 in hex, 2 in decimal)
  - 0x93 # RecordBatch CRC32 (4 byte, 0x5f8450c6 in hex)
  - 0x66
  - 0x62
  - 0xd6
  - 0x00 # RecordBatch Attribute (2 byte, 0x0000 in hex, 0 in decimal)
  - 0x00
  - 0x00 # RecordBatch LastOffsetDelta (4 bytes, 0x00000000 in hex, 0 in decimal)
  - 0x00
  - 0x00
  - 0x00
  - 0x00 # RecordBatch FirstTimestamp: (8 bytes, 0x0000019925146591 in hex, Jan  1, 1970 00:06:49.622093713 UTC)
  - 0x00
  - 0x01
  - 0x99
  - 0x25
  - 0x14
  - 0x65
  - 0x91
  - 0x00 # RecordBatch LastTimestamp: (8 bytes, 0x0000019925146591 in hex, Jan  1, 1970 00:06:49.622093713 UTC)
  - 0x00
  - 0x01
  - 0x99
  - 0x25
  - 0x14
  - 0x65
  - 0x91
  - 0x00 # RecordBatch Producer ID: (8 bytes, 0x0000000000000001 in hex, 1 in decimal)
  - 0x00
  - 0x00
  - 0x00
  - 0x00
  - 0x00
  - 0x00
  - 0x01
  - 0x00 # RecordBatch ProducerEpoch: (2 bytes, 0x0000 in hex, 0 in decimal)
  - 0x00
  - 0x00 # RecordBatch BaseSequence: (4 bytes, 0x00000000 in hex, 0 in decimal)
  - 0x00
  - 0x00
  - 0x00
  - 0x00 # Records Array length: (4 bytes, 0x00000001 in hex, 1 in decimal)
  - 0x00
  - 0x00
  - 0x01
  - 0x2c # Record Size: (zig-zag varint, 0x2c in hex, 22 in decimal)
  - 0x00 # Record Atrributes [1 byte integer]
  - 0x00 # Timestamp delta (zig-zag varint, 0x00 in hex, 0 in decimal)
  - 0x00 # Record Offset (zig-zag varint, 0x00 in hex, 0 in decimal)
  - 0x01 # Record Key Length (zig-zag varint, 0x01 in hex, -1 in decimal -> NO key follows)
  - 0x20 # Record value length (zig-zag varint, 0x20 in hex -> 16 in decimal after decoding)
  - 0x6d # m: Record's actual value (Actual message value ("msg-pax-0-hellon" in UTF-8))
  - 0x73 # s
  - 0x67 # g
  - 0x2d # -
  - 0x70 # p
  - 0x61 # a
  - 0x78 # x
  - 0x2d # -
  - 0x30 # 0
  - 0x2d # -
  - 0x68 # h
  - 0x65 # e
  - 0x6c # l
  - 0x6c # l
  - 0x6f # o
  - 0x6e # n
  - 0x00 # Record Headers Count (zig-zag varint, 0x00 in hex, No array follows)
  - 0x00 # Tag Buffer for the partition
  - 0x00 # Tag Buffer for the topic
  - 0x04 # Topic Name: Topic name length + 1 (unsigned varint, 0x04 in hex, 4 in decimal)
  - 0x71 # q: Topic Name ("quz" in UTF-8)
  - 0x75 # u
  - 0x7a # z
  - 0x03 # Partition Array length + 1 (unsigned varint, 0x03 in hex, 3 in decimal)
  - 0x00 # Partition[0]: ID (4 bytes, 0x00000000 in hex, 0 in decimal)
  - 0x00
  - 0x00
  - 0x00
  - 0x55 # All RecordBatch length + 1 (unsigned varint, 0x55 in hex, 85 in decimal)
  - 0x00 # RecordBatch[0]: Offset (8 bytes, 0x0000000000000000 in hex, 0 in decimal)
  - 0x00
  - 0x00
  - 0x00
  - 0x00
  - 0x00
  - 0x00
  - 0x00
  - 0x00 # Message Size: (4 bytes, 0x00000048 in hex, 72 in decimal)
  - 0x00
  - 0x00
  - 0x48
  - 0xff # Partition Leader Epoch (4 bytes, 0xffffffff in hex, -1 in decimal)
  - 0xff
  - 0xff
  - 0xff
  - 0x02 # Magic Byte: 2
  - 0x2e # CRC32: (4 bytes, 0x2eb784aa in hex)
  - 0xb7
  - 0x84
  - 0xaa
  - 0x00 # Attributes: (2 bytes, 0x0000 in hex, 0 in decimal)
  - 0x00
  - 0x00 # Last Offset Delta: (4 bytes, 0x00000000 in hex, 0 in decimal)
  - 0x00
  - 0x00
  - 0x00
  - 0x00 # First Timestamp: (8 bytes, 0x000001992514658e in hex, Jan  1, 1970 00:06:49.622093710 UTC)
  - 0x00
  - 0x01
  - 0x99
  - 0x25
  - 0x14
  - 0x65
  - 0x8e
  - 0x00 # Last Timestamp: (8 bytes, 0x000001992514658e in hex, Jan  1, 1970 00:06:49.622093710 UTC)
  - 0x00
  - 0x01
  - 0x99
  - 0x25
  - 0x14
  - 0x65
  - 0x8e
  - 0x00 # Producer ID: (8 bytes, 0x0000000000000001 in hex, 1 in decimal)
  - 0x00
  - 0x00
  - 0x00
  - 0x00
  - 0x00
  - 0x00
  - 0x01
  - 0x00 # Producer Epoch: (2 bytes, 0x0000 in hex, 0 in decimal)
  - 0x00
  - 0x00 # Base Sequence: (4 bytes, 0x00000000 in hex, 0 in decimal)
  - 0x00
  - 0x00
  - 0x00
  - 0x00 # Number of Records: (4 bytes, 0x00000001 in hex, 1 in decimal)
  - 0x00
  - 0x00
  - 0x01
  - 0x2c # Record[0]: Size: (zig-zag varint, 0x2c in hex, 22 in decimal)
  - 0x00 # Attributes: (1 byte, 0x00 in hex, 0 in decimal)
  - 0x00 # Timestamp Delta (zig-zag varint, 0x00 in hex, 0 in decimal)
  - 0x00 # Offset: 0
  - 0x01 # Key Length (zig-zag varint, 0x01 in hex, -1 in decimal -> NULL (no key follows))
  - 0x20 # Value length (zig-zag varint, 0x20 in hex -> 16 after decoding)
  - 0x6d # m: Value: ("msg-quz-0-hellon" in UTF-8)
  - 0x73 # s
  - 0x67 # g
  - 0x2d # -
  - 0x71 # q
  - 0x75 # u
  - 0x7a # z
  - 0x2d # -
  - 0x30 # 0
  - 0x2d # -
  - 0x68 # h
  - 0x65 # e
  - 0x6c # l
  - 0x6c # l
  - 0x7f # o
  - 0x6e # n
  - 0x00 # Headers
  - 0x00 # Tag Buffer for Partition
  - 0x00 # Partition[1]: ID (4 bytes, 0x00000000 in hex, 0 in decimal)
  - 0x00
  - 0x00
  - 0x01
  - 0x55 # All RecordBatch length + 1 (unsigned varint, 0x55 in hex, 85 in decimal)
  - 0x00 # RecordBatch[0]: Offset (8 bytes, 0x0000000000000000 in hex, 0 in decimal)
  - 0x00
  - 0x00
  - 0x00
  - 0x00
  - 0x00
  - 0x00
  - 0x00
  - 0x00 # Message Size: (4 bytes, 0x00000048 in hex, 72 in decimal)
  - 0x00
  - 0x00
  - 0x48
  - 0xff # Partition Leader Epoch (4 bytes, 0xffffffff in hex, -1 in decimal)
  - 0xff
  - 0xff
  - 0xff
  - 0x02 # Magic Byte: 2
  - 0x2e # CRC32: (4 bytes, 0xa45900ed in hex)
  - 0xb7
  - 0x84
  - 0xaa
  - 0x00 # Attributes: (2 bytes, 0x0000 in hex, 0 in decimal)
  - 0x00
  - 0x00 # Last Offset Delta: (4 bytes, 0x00000000 in hex, 0 in decimal)
  - 0x00
  - 0x00
  - 0x00
  - 0x00 # First Timestamp: (8 bytes, 0x000001992514658e in hex, Jan  1, 1970 00:06:49.622093710 UTC)
  - 0x00
  - 0x01
  - 0x99
  - 0x25
  - 0x14
  - 0x65
  - 0x8e
  - 0x00 # Last Timestamp: (8 bytes, 0x000001992514658e in hex, Jan  1, 1970 00:06:49.622093710 UTC)
  - 0x00
  - 0x01
  - 0x99
  - 0x25
  - 0x14
  - 0x65
  - 0x8e
  - 0x00 # Producer ID: (8 bytes, 0x0000000000000001 in hex, 1 in decimal)
  - 0x00
  - 0x00
  - 0x00
  - 0x00
  - 0x00
  - 0x00
  - 0x01
  - 0x00 # Producer Epoch: (2 bytes, 0x0000 in hex, 0 in decimal)
  - 0x00
  - 0x00 # Base Sequence: (4 bytes, 0x00000000 in hex, 0 in decimal)
  - 0x00
  - 0x00
  - 0x00
  - 0x00 # Number of Records: (4 bytes, 0x00000001 in hex, 1 in decimal)
  - 0x00
  - 0x00
  - 0x01
  - 0x2c # Record[0]: Size: (zig-zag varint, 0x2c in hex, 22 in decimal)
  - 0x00 # Attributes: (1 byte, 0x00 in hex, 0 in decimal)
  - 0x00 # Timestamp Delta (zig-zag varint, 0x00 in hex, 0 in decimal)
  - 0x00 # Offset: 0
  - 0x01 # Key Length (zig-zag varint, 0x01 in hex, -1 in decimal -> NULL (no key follows))
  - 0x20 # Value length (zig-zag varint, 0x20 in hex -> 16 after decoding)
  - 0x6d # m: Value: ("msg-quz-0-hellon" in UTF-8)
  - 0x73 # s
  - 0x67 # g
  - 0x2d # -
  - 0x71 # q
  - 0x75 # u
  - 0x7a # z
  - 0x2d # -
  - 0x31 # 1
  - 0x2d # -
  - 0x68 # h
  - 0x65 # e
  - 0x6c # l
  - 0x6c # l
  - 0x7f # o
  - 0x6e # n
  - 0x00 # Headers
  - 0x00 # Tag Buffer for Partition
  - 0x00 # Tag Buffer for Topic
  - 0x00 # Tag Buffer for response
